(this.webpackJsonpPinPointGuam=this.webpackJsonpPinPointGuam||[]).push([[28],{1662:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n(16),o=n(0),c=n(9),u=n(1630),i=n(1512),s=n(1211),l=n(1683),d=n(1210),b=n(1098),p=n(879),j=n(176),f=n(19),O=n.n(f),m=n(434),v=n(880),h=n(171),x=n(1),g=Object(p.a)(s.a)({width:"100%",marginTop:"15px",padding:"10px 0px",textTransform:"none",fontWeight:"bold",fontSize:"12px"}),w=Object(m.a)((function(e){return{customLabel:{"& label":{fontSize:"12px"}},customOption:{fontSize:"12px !important"}}}));t.default=function(e){var t=Object(o.useState)(!1),n=Object(a.a)(t,2),s=n[0],p=n[1],f=Object(o.useState)(""),m=Object(a.a)(f,2),C=m[0],S=m[1],L=Object(o.useState)(""),N=Object(a.a)(L,2),y=N[0],_=N[1],q=Object(o.useState)(""),T=Object(a.a)(q,2),D=T[0],P=T[1],R=Object(o.useState)({}),Y=Object(a.a)(R,2),W=Y[0],z=Y[1],k=Object(o.useState)([]),I=Object(a.a)(k,2),M=I[0],E=I[1],F=Object(o.useState)(""),G=Object(a.a)(F,2),H=G[0],J=G[1],A=Object(o.useState)(""),U=Object(a.a)(A,2),V=U[0],B=U[1],K=w(e),Q=Object(c.b)();Object(o.useEffect)((function(){Q(Object(j.b)("Create a New PTR Request"))}),[]),Object(o.useEffect)((function(){H&&H.length>2&&O.a.post("/properties/search",{searchText:H}).then((function(e){return E(e.data.rows)}))}),[H]);var X=function(){z({});var e=!0;return H?z((function(e){return Object(r.a)(Object(r.a)({},e),{},{option:!1})})):(z((function(e){return Object(r.a)(Object(r.a)({},e),{},{options:!0})})),e=!1),D?z((function(e){return Object(r.a)(Object(r.a)({},e),{},{requestType:!1})})):(z((function(e){return Object(r.a)(Object(r.a)({},e),{},{requestType:!0})})),e=!1),y?z((function(e){return Object(r.a)(Object(r.a)({},e),{},{customer:!1})})):(z((function(e){return Object(r.a)(Object(r.a)({},e),{},{customer:!0})})),e=!1),e};return Object(x.jsxs)(u.a,{sx:{margin:"30px",width:"50%"},children:[Object(x.jsx)(l.a,{className:"mt-10 mb-16",inputValue:H,onInputChange:function(e,t){return J(t.toUpperCase())},getOptionLabel:function(e){return e.property_descriptor_std},options:M,renderInput:function(e){return Object(x.jsx)(d.a,Object(r.a)(Object(r.a)({classes:{root:K.customLabel},error:W.options},e),{},{label:"Land parcel",variant:"outlined",required:!0}))}}),Object(x.jsx)("div",{className:"mt-10 mb-16",children:Object(x.jsx)(d.a,{id:"Customer Name",label:"Customer Name",required:!0,select:!0,classes:{root:K.customLabel},type:"text",name:"Customer Name",value:y,onChange:function(e){return _(e.target.value)},variant:"outlined",fullWidth:!0,error:W.customer,children:Object(x.jsx)(b.a,{classes:{root:K.customOption},value:87,children:"TG PTR"})})}),Object(x.jsx)("div",{className:"mt-10 mb-16",children:Object(x.jsxs)(d.a,{classes:{root:K.customLabel},label:"Request Type",variant:"outlined",className:"mt-10 mb-16",required:!0,select:!0,fullWidth:!0,error:W.requestType,value:D,onChange:function(e){z((function(e){return[e[0],!1]})),P(e.target.value)},children:[Object(x.jsx)(b.a,{classes:{root:K.customOption},value:"Standard",children:"Standard"}),Object(x.jsx)(b.a,{classes:{root:K.customOption},value:"Rush",children:"Rush"})]})}),Object(x.jsx)("div",{className:"mt-10 mb-16",children:Object(x.jsx)(d.a,{id:"ResWareFileNumber",label:"ResWare File Number",classes:{root:K.customLabel},type:"text",value:V,onChange:function(e){return B(e.target.value)},variant:"outlined",fullWidth:!0})}),Object(x.jsx)("div",{className:"mt-10 mb-16",children:Object(x.jsx)(d.a,{id:"Description",label:"Description",classes:{root:K.customLabel},type:"text",name:"notes",inputProps:{maxLength:50},value:C,onChange:function(e){return S(e.target.value)},multiline:!0,rows:5,variant:"outlined",fullWidth:!0})}),s?Object(x.jsx)("div",{className:"flex justify-center mt-20",children:Object(x.jsx)(i.a,{size:30})}):Object(x.jsx)(g,{variant:"contained",onClick:function(){var e;X()&&(p(!0),O.a.post("/requests/createPtrFormAdmin",{customer_id:y,property_id:null===(e=M[0])||void 0===e?void 0:e.property_id,land_parcel:H,notes:C,request_type:D,resware_file_number:V}).then((function(e){Object(v.h)(e.data.message),S(""),_(""),P(""),J(""),E([]),z({}),p(!1),h.a.push("/ptr/admin/dashboard")})).catch((function(e){var t,n;p(!1),Object(v.g)(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)})))},children:"Submit"})]})}},880:function(e,t,n){"use strict";n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b})),n.d(t,"h",(function(){return p})),n.d(t,"g",(function(){return j}));var r=n(426),a=n.n(r),o=n(175),c=n(61),u=function(e,t,n){var r=[].concat.apply([],e.map((function(e){return e.properties[0].docs})));return n?r:i(r,t)},i=function(e,t){return e.filter((function(e){return t.includes(e.ptr_report_status)}))},s=function(e){return function(t,n){return((t.data?a()(t.data,"DD/MM/YYYY").valueOf():-1/0)-(n.data?a()(n.data,"DD/MM/YYYY").valueOf():-1/0))*("asc"===e?1:-1)}},l=function(e){return function(t,n){return(parseInt(t.data.props.row.doc_no)-parseInt(n.data.props.row.doc_no))*("asc"===e?1:-1)}},d=function(e){return void 0===e||"undefined"===e||null===e||"null"===e||"nil"===e||""===e?"":e},b=function(e,t,n){return!!t.filter((function(t,r){var a,o,c;return"Doc No."===n[r].name?null===t||void 0===t||null===(a=t.props)||void 0===a||null===(o=a.row)||void 0===o||null===(c=o.docno)||void 0===c?void 0:c.toLowerCase().includes(e.toLowerCase()):"Status"===n[r].name?t.props.label.toLowerCase().includes(e.toLowerCase()):null===t||void 0===t?void 0:t.toString().toLowerCase().includes(e.toLowerCase())})).length},p=function(e){o.a.dispatch(Object(c.c)({message:e,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"},variant:"success"}))},j=function(e){o.a.dispatch(Object(c.c)({message:e||"Network Error",autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"},variant:"error"}))}}}]);