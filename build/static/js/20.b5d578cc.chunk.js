(this.webpackJsonpPinPointGuam=this.webpackJsonpPinPointGuam||[]).push([[20],{1660:function(e,t,n){"use strict";n.r(t);var r=n(16),a=n(0),o=n(9),i=n(176),c=n(434),s=n(931),l=n.n(s),u=n(4),d=n(959),p=n(19),b=n.n(p),j=n(426),f=n.n(j),m=n(880),h=n(817),O=n(174),x=n(1512),g=n(904),v=n(1),k=[{name:"PTR",label:"PTR",options:{filter:!0,sort:!0,customBodyRender:m.a}},{name:"Property",label:"Property",options:{filter:!0,sort:!0,customBodyRender:m.a}},{name:"Type",label:"Type",options:{filter:!0,sort:!0,customBodyRender:m.a}},{name:"Request Type",label:"Request Type",options:{filter:!0,sort:!0,customBodyRender:m.a}},{name:"Property Descriptor",label:"Property Descriptor",options:{filter:!0,sort:!0,setCellProps:function(){return{style:{maxWidth:"150px"}}},customBodyRender:m.a}},{name:"Request Date",label:"Request Date",options:{filter:!0,sort:!0,sortCompare:m.c,customBodyRender:m.a}},{name:"Status",label:"Status",options:{filter:!0,sort:!0,customBodyRender:m.a}},{name:"Transaction Id",label:"Transaction Id",options:{filter:!0,sort:!0,customBodyRender:m.a}},{name:"Assigned To",label:"Assigned To",options:{filter:!0,sort:!0,customBodyRender:m.a}}],y=Object(c.a)({dark1Background:{backgroundColor:"rgba(200,200,200,0.5)"},dark2Background:{"&:hover":{backgroundColor:"rgba(200,200,200,1)"}}});t.default=function(){var e=Object(a.useState)(),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),p=Object(r.a)(s,2),j=p[0],w=p[1],N=Object(a.useState)(!1),D=Object(r.a)(N,2),P=D[0],B=D[1],T=Object(o.b)(),R=y(),C=Object(a.useMemo)((function(){return{filter:!0,filterType:"multiselect",tableBodyMaxHeight:"calc(100vh - 230px)",tableBodyHeight:"calc(100vh - 230px)",rowsPerPage:100,fixedHeader:!0,selectableRows:"none",downloadOptions:{filename:"AdminDashboardListing.csv",separator:","},print:!1,customToolbar:function(){return Object(v.jsx)(h.a,{title:"Print",children:Object(v.jsx)(d.a,{className:"text-gray-600 cursor-pointer hover:text-black",onClick:function(){return B(!0)}})})},draggableColumns:{enabled:!0,transitionTime:300},setRowProps:function(e,t,n){var r={class:R.dark2Background};return n%2===0&&(r.class=Object(u.default)(r.class,R.dark1Background)),r}}}),[R]);Object(a.useEffect)((function(){T(Object(i.b)("Main Dashboard")),S()}),[]);var S=function(){w(!0),b.a.post("/admin/dashboard").then((function(e){e.data.status&&c(e.data.getPtrRequest.map((function(e){return[e.id,e.property_id,e.type,e.request_type,e.property_descriptor,f()(e.request_date).format("DD/MM/YYYY"),e.status,e.transaction_id,e.staffname]}))),w(!1)})).catch((function(e){var t,n;w(!1),Object(m.g)(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)}))};return Object(v.jsxs)("div",{className:"mx-20 my-20",children:[Object(v.jsx)(l.a,{title:Object(v.jsxs)(O.a,{variant:"h6",children:["Data Listing",j&&Object(v.jsx)(x.a,{size:24,style:{marginLeft:15,position:"relative",top:4}})]}),data:n,columns:k,options:C}),n&&Object(v.jsx)(g.a,{openModal:P,setOpenModal:B,title:"PTR Admin Report",subTitle:"PinPointGuam: Data List",columns:k.slice(1),rows:n.map((function(e){return e.slice(1)})),isLoading:j})]})}},880:function(e,t,n){"use strict";n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"h",(function(){return b})),n.d(t,"g",(function(){return j}));var r=n(426),a=n.n(r),o=n(175),i=n(61),c=function(e,t,n){var r=[].concat.apply([],e.map((function(e){return e.properties[0].docs})));return n?r:s(r,t)},s=function(e,t){return e.filter((function(e){return t.includes(e.ptr_report_status)}))},l=function(e){return function(t,n){return((t.data?a()(t.data,"DD/MM/YYYY").valueOf():-1/0)-(n.data?a()(n.data,"DD/MM/YYYY").valueOf():-1/0))*("asc"===e?1:-1)}},u=function(e){return function(t,n){return(parseInt(t.data.props.row.doc_no)-parseInt(n.data.props.row.doc_no))*("asc"===e?1:-1)}},d=function(e){return void 0===e||"undefined"===e||null===e||"null"===e||"nil"===e||""===e?"":e},p=function(e,t,n){return!!t.filter((function(t,r){var a,o,i;return"Doc No."===n[r].name?null===t||void 0===t||null===(a=t.props)||void 0===a||null===(o=a.row)||void 0===o||null===(i=o.docno)||void 0===i?void 0:i.toLowerCase().includes(e.toLowerCase()):"Status"===n[r].name?t.props.label.toLowerCase().includes(e.toLowerCase()):null===t||void 0===t?void 0:t.toString().toLowerCase().includes(e.toLowerCase())})).length},b=function(e){o.a.dispatch(Object(i.c)({message:e,autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"},variant:"success"}))},j=function(e){o.a.dispatch(Object(i.c)({message:e||"Network Error",autoHideDuration:3e3,anchorOrigin:{vertical:"top",horizontal:"center"},variant:"error"}))}},891:function(e,t,n){"use strict";var r=n(8),a=n(174),o=n(1512),i=n(434),c=n(4),s=n(880),l=n(1),u=Object(i.a)((function(e){return{dark1Background:{backgroundColor:"rgba(200,200,200,0.5)"},dark2Background:{"&:hover":{backgroundColor:"rgba(200,200,200,1)"}},tData:{width:"80px",wordBreak:"break-word"}}}));t.a=function(e){var t,n,i=u(e);return Object(l.jsx)("div",{className:e.classes,children:Object(l.jsx)("div",{className:"table-responsive",children:Object(l.jsxs)("table",{className:"simple",children:[Object(l.jsx)("thead",Object(r.a)(Object(r.a)({},null===e||void 0===e||null===(t=e.options)||void 0===t?void 0:t.headProps),{},{children:Object(l.jsx)("tr",{children:e.columns.map((function(e,t){return Object(l.jsx)("th",{style:e.cellStyle,id:e.id,children:Object(l.jsx)(a.a,{className:"font-semibold",children:e.name})},t)}))})})),Object(l.jsx)("tbody",Object(r.a)(Object(r.a)({},null===e||void 0===e||null===(n=e.options)||void 0===n?void 0:n.bodyProps),{},{children:e.isLoading?Object(l.jsx)("tr",{children:Object(l.jsx)("td",{colSpan:6,className:"text-center",children:Object(l.jsx)(o.a,{size:24})})}):e.rows.length?e.rows.map((function(t,n){return Object(l.jsx)("tr",{className:e.striped&&n%2===0?Object(c.default)(i.dark1Background,i.dark2Background):"",children:t.map((function(e,t){return Object(l.jsx)("td",{className:i.tData,children:Object(l.jsx)(a.a,{className:"truncate break-normal",children:Object(s.a)(e)})},t)}))},n)})):Object(l.jsx)("tr",{children:Object(l.jsx)("td",{colSpan:6,className:"text-center",children:"No Data"})})}))]})})})}},901:function(e,t,n){"use strict";var r=n(933),a=n(0),o=n(1149),i=n(434),c=(n(905),n(1)),s=Object(i.a)({headerWrapper:{background:"#22d3ee",alignItems:"center",padding:"10px 15px 0",minHeight:"50px",position:"relative"},logoWrapper:{width:"auto",height:"90px","& > img":{width:"auto",height:"auto",maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}},printTitle:{fontSize:"30px",color:"white",fontWeight:"bold",textAlign:"right"},printSubData:{fontSize:"20px",color:"Black",textAlign:"right",display:"inline",marginLeft:0,paddingRight:"10px",wordBreak:"break-word"},printSubTitle:{background:"#000000",padding:"4px 15px",position:"relative",left:0,top:0,display:"table-header-group",zIndex:"9",width:"100%","& > h2":{fontSize:"20px",color:"#FFFFFF",fontWeight:"bold",marginBottom:"0"}}}),l=Object(a.forwardRef)((function(e,t){var n=Object(a.useRef)(),i=s(),l=Object(r.useReactToPrint)({content:function(){return n.current}});return Object(a.useImperativeHandle)(t,(function(){return{printData:function(){l()}}})),Object(c.jsx)("div",{className:"hidden",children:Object(c.jsxs)("div",{ref:n,children:[Object(c.jsxs)(o.a,{container:!0,spacing:2,className:i.headerWrapper,children:[Object(c.jsx)(o.a,{item:!0,xs:3,className:"p-36",children:Object(c.jsx)("div",{className:i.logoWrapper,children:Object(c.jsx)("img",{src:"assets/images/logos/PinPointV2-bg.png",alt:"PINPOINTGUAM"})})}),Object(c.jsxs)(o.a,{item:!0,xs:9,className:"p-36",children:[Object(c.jsx)("div",{className:"d-flex justify-end items-center my-auto",children:Object(c.jsx)("h4",{className:i.printTitle,children:e.title})}),Object(c.jsx)("div",{className:"d-flex justify-end items-right",children:e.subData?null===e||void 0===e?void 0:e.subData.map((function(e){return e.map((function(e){return Object(c.jsxs)("h5",{className:i.printSubData,children:[e.name,","]})}))})):""})]}),Object(c.jsx)("div",{className:i.printSubTitle,children:Object(c.jsx)("h2",{children:e.subTitle})})]}),Object(c.jsx)("div",{children:e.children})]})})}));t.a=l},904:function(e,t,n){"use strict";var r=n(20),a=n(16),o=n(7),i=n(425),c=n(795),s=n(422),l=n(1630),u=n(813),d=n(1208),p=n(815),b=n(434),j=n(4),f=n(0),m=n(891),h=n(901),O=n(1661),x=n(1),g=["openModal","setOpenModal","children"],v=Object(b.a)((function(e){return{container:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"auto",backgroundColor:e.palette.background.paper,border:"2px solid #555",padding:"3rem"},choices:{maxHeight:"60vh",overflowY:"scroll"},checkBox:{marginBottom:"10px",width:"30%",justifyContent:"flex-start",alignItems:"flex-start","& span":{display:"flex",alignItems:"center",paddingTop:"0","&:last-child":{top:"-10px",width:"100%",alignItems:"flex-start",height:"40px",overflow:"hidden",display:"-webkit-box","-webkit-line-clamp":"2","-webkit-box-orient":"vertical"}}}}}));t.a=function(e){var t=e.openModal,n=e.setOpenModal,b=(e.children,Object(o.a)(e,g)),k=v(b),y=Object(f.useRef)(),w=Object(f.useState)([]),N=Object(a.a)(w,2),D=N[0],P=N[1],B=Object(f.useState)([]),T=Object(a.a)(B,2),R=T[0],C=T[1];Object(f.useEffect)((function(){P(b.columns.map((function(e,t){return{name:e.name,id:t}}))),C(b.columns.map((function(e,t){return t})))}),[b.columns]);return Object(x.jsx)(i.a,{open:t,onClose:function(){return n(!1)},closeAfterTransition:!0,BackdropComponent:c.a,BackdropProps:{timeout:200,onDragOver:function(e){return e.preventDefault()},onDrop:function(e){return e.preventDefault()}},children:Object(x.jsx)(s.a,{in:t,children:Object(x.jsxs)(l.a,{className:Object(j.default)(b.className,k.container,"rounded-12"),children:[Object(x.jsx)("h2",{children:"Show Columns"}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:k.choices,children:b.columns.map((function(e,t){return[Object(x.jsx)(u.a,{className:k.checkBox,label:e.name,control:Object(x.jsx)(d.a,{checked:D.filter((function(t){return t.name===e.name})).length,value:e.name,onChange:function(e){return function(e,t){e.target.checked?(P((function(n){return[].concat(Object(r.a)(n),[{name:e.target.value,id:t}])})),C((function(e){return[].concat(Object(r.a)(e),[t])}))):(P((function(t){return t.filter((function(t){return t.name!==e.target.value}))})),C((function(e){return e.filter((function(e){return e!==t}))})))}(e,t)}})})]}))}),Object(x.jsx)("br",{}),Object(x.jsx)("div",{className:"my-50 w-full flex justify-center",children:Object(x.jsx)(p.a,{variant:"contained",color:"secondary",startIcon:Object(x.jsx)(O.a,{}),size:"large",onClick:function(){return y.current.printData()},children:"Print"})}),Object(x.jsx)(h.a,{ref:y,title:b.title,subTitle:b.subTitle,children:D&&Object(x.jsx)(m.a,{columns:D.sort((function(e,t){return e.id-t.id})),rows:b.rows.map((function(e){return e.filter((function(e,t){return R.includes(t)}))})),isLoading:b.isLoading})})]})})})}},905:function(e,t,n){},959:function(e,t,n){"use strict";var r=n(0),a=n(100);t.a=Object(a.a)(r.createElement("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"}),"LocalPrintshop")}}]);